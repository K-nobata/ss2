<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Steam 日本語レビュー高評価ランキング</title>

<style>
  body {
    font-family: system-ui, sans-serif;
    background: #0e1525;
    color: #e2e8f0;
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
  }

  .container {
    width: 100%;
    max-width: 1200px;
  }

  h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #f1f5f9;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background: #1a2435;
    border-radius: 12px;
    overflow: hidden;
  }

  thead {
    background: #111a2c;
  }

  th, td {
    padding: 14px;
    font-size: 17px;
    text-align: center;
    border-bottom: 1px solid #25314a;
  }

  th {
    font-weight: bold;
    color: #cbd5e1;
  }

  .rank-col {
    width: 50px;
  }

  .game-cell {
    display: flex;
    align-items: center;
    gap: 14px;
    text-align: left;
    min-height: 80px
  }

  .game-img {
    width: 144px;
    height: 60px;
    object-fit: cover;
    border-radius: 4px;
  }

  a {
    color: #e2e8f0;
    text-decoration: none;
  }

  a:hover {
    color: #38bdf8;
  }

  /* ランク色付け */
  tr:nth-child(1) {
    background: rgba(255,215,0,0.12);
  }
  tr:nth-child(2) {
    background: rgba(192,192,192,0.12);
  }
  tr:nth-child(3) {
    background: rgba(205,127,50,0.12);
  }

  /* スマホ対応 */
  @media (max-width: 720px) {
    th:nth-child(3), td:nth-child(3),
    th:nth-child(4), td:nth-child(4),
    th:nth-child(5), td:nth-child(5) {
      display: none;
    }
  }
</style>

</head>
<body>

<div class="container">
  <h1>Steam 日本語レビュー高評価ランキング</h1>

  <table id="ranking-table">
    <thead>
      <tr>
        <th class="rank-col">順位</th>
        <th>ゲーム</th>
        <th>日本語評価率</th>
        <th>日本語レビュー数</th>
        <th>全言語評価率</th>
        <th>全言語レビュー数</th>
      </tr>
    </thead>
    <tbody id="table-body"></tbody>
  </table>
</div>

<script>
async function loadGames() {
  const res = await fetch("data.json");
  const games = await res.json();

  // 念のためランク順にソート
  games.sort((a, b) => (b.positive_rate_jp || 0) - (a.positive_rate_jp || 0));

  const tbody = document.getElementById("table-body");
  games.forEach((g, i) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td class="rank-col">${i + 1}</td>
      <td>
        <a href="${g.store_url}" target="_blank" class="game-cell">
          <img src="${g.image_url}" class="game-img" />
          <span>${g.name}</span>
        </a>
      </td>
      <td>${g.positive_rate_jp}%</td>
      <td>${g.total_reviews_jp}</td>
      <td>${g.positive_rate_all}%</td>
      <td>${g.total_reviews_all}</td>
    `;
    tbody.appendChild(tr);
  });
}

loadGames();
</script>

</body>
</html>
